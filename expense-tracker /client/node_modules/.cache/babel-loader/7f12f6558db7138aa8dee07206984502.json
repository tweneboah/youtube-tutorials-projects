{"ast":null,"code":"import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\"; //Actions for redirect\n//Create action\n\nexport const createExpAction = createAsyncThunk(\"expense/create\", async (payload, {\n  rejectWithValue,\n  getState,\n  dispatch\n}) => {\n  var _getState, _getState$users, _getState$users$userA;\n\n  //get user token from store\n  const userToken = (_getState = getState()) === null || _getState === void 0 ? void 0 : (_getState$users = _getState.users) === null || _getState$users === void 0 ? void 0 : (_getState$users$userA = _getState$users.userAuth) === null || _getState$users$userA === void 0 ? void 0 : _getState$users$userA.token;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${userToken}`\n    }\n  };\n\n  try {\n    //make http call here\n    const {\n      data\n    } = await axios.post(`${baseURL}/expenses`, payload, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error === null || error === void 0 ? void 0 : error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //fetch all expenses\n\nexport const fetchAllExpAction = createAsyncThunk(\"expense/fetch-all\", async (payload, {\n  rejectWithValue,\n  getState,\n  dispatch\n}) => {\n  var _getState2, _getState2$users;\n\n  const user = (_getState2 = getState()) === null || _getState2 === void 0 ? void 0 : (_getState2$users = _getState2.users) === null || _getState2$users === void 0 ? void 0 : _getState2$users.userAuth;\n  const config = {\n    headers: {\n      authorization: `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n    }\n  };\n\n  try {\n    const {\n      data\n    } = await axios.get(`${baseURL}/expenses?page=${payload}`, config);\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error === null || error === void 0 ? void 0 : error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //Create action\n\nexport const updateExpAction = createAsyncThunk(\"expense/update\", async (payload, {\n  rejectWithValue,\n  getState,\n  dispatch\n}) => {\n  var _getState3, _getState3$users, _getState3$users$user;\n\n  //get user token from store\n  const userToken = (_getState3 = getState()) === null || _getState3 === void 0 ? void 0 : (_getState3$users = _getState3.users) === null || _getState3$users === void 0 ? void 0 : (_getState3$users$user = _getState3$users.userAuth) === null || _getState3$users$user === void 0 ? void 0 : _getState3$users$user.token;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${userToken}`\n    }\n  };\n\n  try {\n    //make http call here\n    const {\n      data\n    } = await axios.put(`${baseURL}/expenses/${payload === null || payload === void 0 ? void 0 : payload.id}`, payload, config);\n    return data;\n  } catch (error) {\n    var _error$response3;\n\n    if (!(error === null || error === void 0 ? void 0 : error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data);\n  }\n}); //slices\n\nconst expenseSlices = createSlice({\n  name: \"expenses\",\n  initialState: {},\n  extraReducers: builder => {\n    //   Create Expense\n    builder.addCase(createExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(createExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseCreated = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createExpAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.msg;\n    }); //   fetch all Expense\n\n    builder.addCase(fetchAllExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchAllExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseList = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchAllExpAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.msg;\n    }); //   update Expense\n\n    builder.addCase(updateExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(updateExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseUpdated = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(updateExpAction.rejected, (state, action) => {\n      var _action$payload3, _action$error3;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error3 = action.error) === null || _action$error3 === void 0 ? void 0 : _action$error3.msg;\n    });\n  }\n});\nexport default expenseSlices.reducer;","map":{"version":3,"sources":["/Users/inovotek/programming/youtube/youtube-tutorials-projects/expense-tracker /client/src/redux/slices/expenses/expensesSlices.js"],"names":["createAsyncThunk","createSlice","createAction","axios","baseURL","createExpAction","payload","rejectWithValue","getState","dispatch","userToken","users","userAuth","token","config","headers","Authorization","data","post","error","response","fetchAllExpAction","user","authorization","get","updateExpAction","put","id","expenseSlices","name","initialState","extraReducers","builder","addCase","pending","state","action","loading","fulfilled","expenseCreated","appErr","undefined","serverErr","rejected","msg","expenseList","expenseUpdated","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\";\n\n\n//Actions for redirect\n\n\n\n//Create action\nexport const createExpAction = createAsyncThunk(\n  \"expense/create\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.post(`${baseURL}/expenses`, payload, config);\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//fetch all expenses\nexport const fetchAllExpAction = createAsyncThunk(\n  \"expense/fetch-all\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    const user = getState()?.users?.userAuth;\n    const config = {\n      headers: {\n        authorization: `Bearer ${user?.token}`,\n      },\n    };\n    try {\n      const { data } = await axios.get(\n        `${baseURL}/expenses?page=${payload}`,\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//Create action\nexport const updateExpAction = createAsyncThunk(\n  \"expense/update\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.put(\n        `${baseURL}/expenses/${payload?.id}`,\n        payload,\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n//slices\n\nconst expenseSlices = createSlice({\n  name: \"expenses\",\n  initialState: {},\n  extraReducers: builder => {\n    //   Create Expense\n    builder.addCase(createExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(createExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseCreated = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createExpAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n\n    //   fetch all Expense\n    builder.addCase(fetchAllExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchAllExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseList = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchAllExpAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n\n    //   update Expense\n    builder.addCase(updateExpAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(updateExpAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.expenseUpdated = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(updateExpAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n  },\n});\n\nexport default expenseSlices.reducer;\n"]},"metadata":{},"sourceType":"module"}